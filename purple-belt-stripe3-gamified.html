<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>üü£ Purple Belt - Stripe 3: Commitment Systems | Tap-In Leadership</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        .module-header {
            background: linear-gradient(135deg, #a855f7 0%, #7c3aed 100%);
            border: 3px solid #7e22ce;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        }

        .belt-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: white;
            padding: 8px 20px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 700;
            color: #7e22ce;
            margin-bottom: 15px;
            border: 2px solid #c084fc;
        }

        .stripe-indicator {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
        }

        .stripe-dot {
            width: 12px;
            height: 40px;
            background: #6b21a8;
            border-radius: 3px;
        }

        .stripe-dot.inactive {
            background: #e9d5ff;
        }

        h1 {
            color: white;
            font-size: 32px;
            margin-bottom: 10px;
        }

        .module-description {
            color: #f3e8ff;
            font-size: 16px;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .stat-card {
            background: rgba(255,255,255,0.95);
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            border: 2px solid #e9d5ff;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
            color: #a855f7;
            display: block;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 12px;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600;
        }

        .progress-bar {
            background: rgba(255,255,255,0.3);
            height: 8px;
            border-radius: 10px;
            overflow: hidden;
            margin-top: 15px;
        }

        .progress-fill {
            height: 100%;
            background: white;
            border-radius: 10px;
            transition: width 0.5s ease;
            width: 0%;
        }

        .progress-text {
            color: #f3e8ff;
            font-size: 14px;
            text-align: center;
            margin-top: 8px;
            font-weight: 500;
        }

        .lessons-grid {
            display: grid;
            gap: 20px;
            margin-bottom: 30px;
        }

        .lesson-card {
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            border: 2px solid #f3e8ff;
            transition: all 0.3s ease;
        }

        .lesson-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(168,85,247,0.2);
            border-color: #a855f7;
        }

        .lesson-card.completed {
            border-color: #10b981;
            background: linear-gradient(to bottom, white 0%, #f0fdf4 100%);
        }

        .lesson-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
        }

        .lesson-number {
            background: linear-gradient(135deg, #a855f7 0%, #7c3aed 100%);
            color: white;
            font-weight: 700;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            border: 2px solid #7e22ce;
        }

        .lesson-status {
            font-size: 24px;
        }

        h2 {
            color: #1e293b;
            font-size: 24px;
            margin-bottom: 15px;
            margin-top: 10px;
        }

        .lesson-description {
            color: #64748b;
            font-size: 16px;
            line-height: 1.6;
            margin-bottom: 25px;
        }

        .lesson-content {
            background: #f8fafc;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .content-section {
            margin-bottom: 20px;
        }

        .content-section:last-child {
            margin-bottom: 0;
        }

        h3 {
            color: #a855f7;
            font-size: 18px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .concept-list {
            list-style: none;
            padding-left: 0;
        }

        .concept-list li {
            padding: 12px 0;
            border-bottom: 1px solid #e2e8f0;
            color: #475569;
            line-height: 1.6;
        }

        .concept-list li:last-child {
            border-bottom: none;
        }

        .concept-list strong {
            color: #1e293b;
            display: block;
            margin-bottom: 4px;
        }

        .example-box {
            background: white;
            border-left: 4px solid #a855f7;
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
        }

        .example-box strong {
            color: #a855f7;
            display: block;
            margin-bottom: 8px;
        }

        .practice-box {
            background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%);
            border: 2px solid #a855f7;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }

        .practice-box h4 {
            color: #7e22ce;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .practice-box p {
            color: #1e293b;
            line-height: 1.6;
        }

        .complete-btn {
            background: linear-gradient(135deg, #a855f7 0%, #7c3aed 100%);
            color: white;
            border: none;
            padding: 14px 32px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s ease;
            border: 2px solid #7e22ce;
        }

        .complete-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(168,85,247,0.3);
        }

        .complete-btn.completed {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            border-color: #047857;
        }

        .summary-card {
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            border: 2px solid #f3e8ff;
        }

        .summary-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .achievement-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.8);
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            text-align: center;
            opacity: 0;
            pointer-events: none;
            transition: all 0.3s ease;
            z-index: 1000;
            max-width: 400px;
            border: 3px solid #a855f7;
        }

        .achievement-popup.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
            pointer-events: all;
        }

        .achievement-icon {
            font-size: 64px;
            margin-bottom: 20px;
            animation: bounce 0.6s ease;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .achievement-title {
            font-size: 24px;
            color: #1e293b;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .achievement-desc {
            color: #64748b;
            margin-bottom: 20px;
            font-size: 16px;
        }

        .achievement-xp {
            background: linear-gradient(135deg, #a855f7 0%, #7c3aed 100%);
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 20px;
            font-weight: 700;
            display: inline-block;
            border: 2px solid #7e22ce;
        }

        .close-achievement {
            margin-top: 20px;
            background: #f1f5f9;
            border: 2px solid #e2e8f0;
            color: #64748b;
            padding: 10px 24px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.2s;
        }

        .close-achievement:hover {
            background: #e2e8f0;
            color: #475569;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
            z-index: 999;
        }

        .overlay.show {
            opacity: 1;
            pointer-events: all;
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: white;
            text-decoration: none;
            font-size: 14px;
            margin-bottom: 20px;
            padding: 8px 16px;
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            transition: all 0.3s ease;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .back-link:hover {
            background: rgba(255,255,255,0.2);
            transform: translateX(-4px);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
        }

        th {
            background: #a855f7;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
            font-size: 14px;
        }

        td {
            padding: 12px;
            border-bottom: 1px solid #e2e8f0;
            color: #475569;
            line-height: 1.5;
        }

        tr:last-child td {
            border-bottom: none;
        }

        tr:hover {
            background: #faf5ff;
        }

        @media (max-width: 768px) {
            body {
                padding: 15px;
            }

            h1 {
                font-size: 24px;
            }

            .module-header {
                padding: 20px;
            }

            .lesson-card {
                padding: 20px;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="learning-hub.html" class="back-link">
            ‚Üê Back to Learning Hub
        </a>

        <div class="module-header">
            <div class="belt-badge">
                üü£ PURPLE BELT
            </div>
            <div class="stripe-indicator">
                <div class="stripe-dot"></div>
                <div class="stripe-dot"></div>
                <div class="stripe-dot"></div>
                <div class="stripe-dot inactive"></div>
            </div>
            <h1>Stripe 3: Commitment Culture</h1>
            <p class="module-description">
                Build a team culture where commitment is the norm, not the exception. Learn how to embed commitment 
                practices into daily operations and create environments where people hold themselves accountable.
            </p>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-value" id="xpDisplay">0</span>
                    <span class="stat-label">Total XP</span>
                </div>
                <div class="stat-card">
                    <span class="stat-value" id="lessonsDisplay">0/1</span>
                    <span class="stat-label">Lessons</span>
                </div>
                <div class="stat-card">
                    <span class="stat-value" id="badgesDisplay">0/1</span>
                    <span class="stat-label">Stripe</span>
                </div>
            </div>

            <div class="progress-bar">
                <div class="progress-fill" id="progressBar"></div>
            </div>
            <p class="progress-text" id="progressText">0 of 1 lessons completed (3 coming soon)</p>
        </div>

        <div class="lessons-grid">
            <!-- Lesson 1: Building a Commitment Culture -->
            <div class="lesson-card" id="lesson1">
                <div class="lesson-header">
                    <div class="lesson-number">LESSON 1</div>
                    <div class="lesson-status" id="status1">‚ö™</div>
                </div>
                <h2>Building a Commitment Culture</h2>
                <p class="lesson-description">
                    Learn how to shift from a culture of compliance to a culture of commitment. Understand the behaviors 
                    that signal commitment, the patterns that undermine it, and how leaders shape culture through daily actions.
                </p>

                <div class="lesson-content">
                    <div class="content-section">
                        <h3>üéØ Culture Eats Strategy for Breakfast</h3>
                        <p style="color: #475569; line-height: 1.6; margin-bottom: 15px;">
                            Peter Drucker was right. You can have perfect decision frameworks, flawless meeting structures, 
                            pristine tracking systems‚Äîbut if your culture doesn't value commitment, none of it matters. Culture 
                            is what happens when the leader leaves the room.
                        </p>
                        <div class="example-box">
                            <strong>The Test:</strong>
                            What do people do when nobody's watching? When a deadline slips, do they proactively communicate 
                            or hope nobody notices? When priorities conflict, do they re-negotiate commitments or silently 
                            drop the less visible one? That's your culture talking.
                        </div>
                    </div>

                    <div class="content-section">
                        <h3>üí° The Five Markers of Commitment Culture</h3>
                        <p style="color: #475569; line-height: 1.6; margin-bottom: 15px;">
                            You know you have commitment culture when you observe these behaviors consistently:
                        </p>
                        <ul class="concept-list">
                            <li>
                                <strong>1. Early Escalation:</strong>
                                People raise flags when they first see risk, not when deadlines are already blown.
                            </li>
                            <li>
                                <strong>2. Renegotiation Over Silence:</strong>
                                When commitments become impossible, people openly renegotiate instead of quietly dropping them.
                            </li>
                            <li>
                                <strong>3. Peer Accountability:</strong>
                                Team members hold each other accountable, not just waiting for the leader to notice.
                            </li>
                            <li>
                                <strong>4. "Disagree and Commit" Visible:</strong>
                                You hear people say "I disagree but I'm committed" without fear of being labeled difficult.
                            </li>
                            <li>
                                <strong>5. Post-Mortems on Missed Commitments:</strong>
                                When commitments fail, teams analyze why (not who) and adjust systems accordingly.
                            </li>
                        </ul>
                    </div>

                    <div class="content-section">
                        <h3>üõ†Ô∏è How Leaders Build (or Kill) Commitment Culture</h3>
                        <p style="color: #475569; line-height: 1.6; margin-bottom: 15px;">
                            Culture isn't created by posters or values statements. It's created by what leaders reward, 
                            punish, and ignore. Here's how it plays out:
                        </p>
                        <table>
                            <tr>
                                <th>Leader Action</th>
                                <th>Culture Signal Sent</th>
                            </tr>
                            <tr>
                                <td>Someone raises a risk early ‚Üí Leader thanks them publicly</td>
                                <td>"Early escalation is valued here"</td>
                            </tr>
                            <tr>
                                <td>Someone misses deadline but hid the risk ‚Üí Leader addresses it seriously</td>
                                <td>"Hiding problems is worse than having them"</td>
                            </tr>
                            <tr>
                                <td>Leader admits they can't keep a commitment ‚Üí Renegotiates openly</td>
                                <td>"Honesty trumps heroics"</td>
                            </tr>
                            <tr>
                                <td>Team member says "I disagree but commit" ‚Üí Leader checks in later</td>
                                <td>"We follow through on commitments even when we disagreed"</td>
                            </tr>
                            <tr>
                                <td>Commitment fails ‚Üí Team does blameless post-mortem</td>
                                <td>"We learn from failures, we don't hide them"</td>
                            </tr>
                        </table>
                    </div>

                    <div class="content-section">
                        <h3>‚ö†Ô∏è Culture Killers (What Destroys Commitment)</h3>
                        <ul class="concept-list">
                            <li>
                                <strong>Shooting the messenger:</strong>
                                Someone raises a risk, gets blamed for "negativity." Next time, silence.
                            </li>
                            <li>
                                <strong>Heroics rewarded over honesty:</strong>
                                Person who pulls all-nighters to barely hit deadline gets celebrated. Person who said "this 
                                deadline was unrealistic" gets labeled a complainer.
                            </li>
                            <li>
                                <strong>Leader's commitments are flexible, team's aren't:</strong>
                                Leader cancels meetings, misses deadlines, no consequences. Team members held to different standard.
                            </li>
                            <li>
                                <strong>No consequences for serial non-delivery:</strong>
                                Same people miss commitments repeatedly. Everyone sees it. Nothing changes. Message: "Commitments 
                                are optional."
                            </li>
                            <li>
                                <strong>Failure = blame, not learning:</strong>
                                Something goes wrong, witch hunt begins. People learn: don't stick your neck out.
                            </li>
                        </ul>
                    </div>

                    <div class="content-section">
                        <h3>üìä Research Evidence</h3>
                        <div class="example-box">
                            <strong>Google's Project Aristotle (Psychological Safety):</strong>
                            Google studied 180 teams to find what makes them effective. The #1 factor? Psychological safety‚Äî
                            the belief that you can take risks without being punished. In commitment terms: can you say "I can't 
                            make this deadline" without getting destroyed? If not, you'll get compliance theater, not real commitment.
                        </div>
                        <div class="example-box" style="margin-top: 15px;">
                            <strong>Ray Dalio's "Radical Transparency":</strong>
                            Bridgewater Associates built one of the world's most successful hedge funds on a culture of radical 
                            transparency. Every meeting recorded. Every disagreement surfaced. Every commitment tracked. The result? 
                            Extremely high accountability because there's nowhere to hide‚Äîand it's safe to be honest.
                        </div>
                    </div>

                    <div class="content-section">
                        <h3>üîÑ The Commitment Culture Flywheel</h3>
                        <p style="color: #475569; line-height: 1.6; margin-bottom: 15px;">
                            Once established, commitment culture reinforces itself:
                        </p>
                        <div class="example-box">
                            <strong>Positive Cycle:</strong>
                            <p style="color: #475569; margin: 10px 0 0 0; line-height: 1.8;">
                                1. Leader models commitment behavior<br>
                                2. Team sees it's safe to be honest about capacity<br>
                                3. People make realistic commitments<br>
                                4. Commitments get kept<br>
                                5. Trust increases<br>
                                6. More ambitious commitments become possible<br>
                                7. Culture strengthens
                            </p>
                        </div>
                        <div class="example-box" style="background: #fee; border-left-color: #dc2626; margin-top: 15px;">
                            <strong style="color: #991b1b;">Negative Cycle:</strong>
                            <p style="color: #7f1d1d; margin: 10px 0 0 0; line-height: 1.8;">
                                1. Leader punishes honesty about capacity<br>
                                2. Team learns to say "yes" regardless of reality<br>
                                3. Unrealistic commitments made<br>
                                4. Commitments quietly missed<br>
                                5. Trust erodes<br>
                                6. More oversight/micromanagement required<br>
                                7. Culture deteriorates
                            </p>
                        </div>
                    </div>

                    <div class="content-section">
                        <h3>ü•ã BJJ Analogy: Tap or Nap Culture</h3>
                        <div class="example-box" style="background: #fef3c7; border-left-color: #f59e0b;">
                            <strong style="color: #92400e;">In jiu jitsu, there's a saying: "Tap or nap"</strong>
                            <p style="color: #78350f; margin: 0;">
                                If you're caught in a submission, you tap (admit defeat) or you go unconscious trying to tough it out. 
                                Good gyms have "tap early, tap often" culture‚Äîacknowledging when you're caught isn't weakness, it's 
                                wisdom. You preserve your health to train another day. Bad gyms have ego culture‚Äîpeople refuse to tap, 
                                get injured, can't train for months. Same with commitments: can people admit "I'm caught" early, or do 
                                they have to wait until catastrophic failure?
                            </p>
                        </div>
                    </div>

                    <div class="content-section">
                        <h3>‚úÖ Building Commitment Culture: Leader Checklist</h3>
                        <p style="color: #475569; line-height: 1.6; margin-bottom: 15px;">
                            As a leader, regularly assess:
                        </p>
                        <ul class="concept-list">
                            <li>‚òëÔ∏è When was the last time I publicly thanked someone for raising a risk early?</li>
                            <li>‚òëÔ∏è When was the last time I admitted I couldn't keep a commitment?</li>
                            <li>‚òëÔ∏è Do I hold myself to the same commitment standards I expect from others?</li>
                            <li>‚òëÔ∏è When someone disagrees then commits, do I check if they actually followed through?</li>
                            <li>‚òëÔ∏è When commitments fail, do we analyze systems or hunt for scapegoats?</li>
                            <li>‚òëÔ∏è Can someone on my team say "that timeline is unrealistic" without career consequences?</li>
                        </ul>
                        <p style="color: #475569; line-height: 1.6; margin-top: 15px;">
                            If you can't answer "yes" to most of these, your culture needs work.
                        </p>
                    </div>

                    <div class="practice-box">
                        <h4>üéØ Practice Exercise:</h4>
                        <p>
                            This week, intentionally model the behavior you want to see. Pick one: (1) Admit you can't meet a 
                            commitment and renegotiate it publicly, (2) Thank someone who raised a risk early, or (3) Do a 
                            blameless post-mortem on a missed commitment. Watch how your team responds. Culture changes one 
                            visible behavior at a time.
                        </p>
                    </div>
                </div>

                <button class="complete-btn" onclick="completeLesson(1)" id="btn1">
                    Complete Lesson 1
                </button>
            </div>
        </div>

        <!-- Progress Summary -->
        <div class="summary-card">
            <h2 style="margin-bottom: 10px;">üìä Your Progress</h2>
            <p style="color: #64748b; margin-bottom: 20px;">Track your journey through Purple Belt Stripe 3</p>
            
            <div class="summary-stats">
                <div class="stat-card">
                    <span class="stat-value" id="summaryComplete">0/1</span>
                    <span class="stat-label">Lessons Available</span>
                </div>
                <div class="stat-card">
                    <span class="stat-value" id="summaryXP">0</span>
                    <span class="stat-label">XP Earned</span>
                </div>
                <div class="stat-card">
                    <span class="stat-value" id="summaryBadges">In Progress</span>
                    <span class="stat-label">Stripe Status</span>
                </div>
            </div>
            <p style="color: #64748b; text-align: center; margin-top: 15px; font-size: 14px;">
                ‚ö†Ô∏è Lessons 2-4 coming soon. Complete Lesson 1 to earn partial credit.
            </p>
        </div>
    </div>

    <!-- Achievement Popup -->
    <div class="overlay" id="overlay" onclick="closeAchievement()"></div>
    <div class="achievement-popup" id="achievementPopup">
        <div class="achievement-icon">üéâ</div>
        <div class="achievement-title" id="achievementTitle">Lesson Complete!</div>
        <div class="achievement-desc" id="achievementDesc">You're making great progress</div>
        <div class="achievement-xp" id="achievementXP">+25 XP</div>
        <button class="close-achievement" onclick="closeAchievement()">Continue</button>
    </div>

    <script>
        const STORAGE_KEY = 'purplebeltStripe3Completed';
        const XP_KEY = 'purplebeltStripe3ModuleXP';
        const TOTAL_LESSONS = 1; // 1 lesson available now
        const XP_PER_LESSON = 25;

        // Load progress
        function loadProgress() {
            const completed = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
            const moduleXP = parseInt(localStorage.getItem(XP_KEY) || '0');
            
            completed.forEach(lessonNum => {
                markLessonComplete(lessonNum);
            });
            
            updateAllStats();
        }

        // Mark lesson as visually complete
        function markLessonComplete(lessonNum) {
            const card = document.getElementById(`lesson${lessonNum}`);
            const status = document.getElementById(`status${lessonNum}`);
            const btn = document.getElementById(`btn${lessonNum}`);
            
            if (card && status && btn) {
                card.classList.add('completed');
                status.textContent = '‚úÖ';
                btn.textContent = '‚úì Completed';
                btn.classList.add('completed');
            }
        }

        // Complete a lesson
        function completeLesson(lessonNum) {
            let completed = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
            let moduleXP = parseInt(localStorage.getItem(XP_KEY) || '0');
            
            if (completed.includes(lessonNum)) {
                showAchievement('Already Complete', 'You\'ve already completed this lesson', 'No XP');
                return;
            }
            
            // Add to completed
            completed.push(lessonNum);
            localStorage.setItem(STORAGE_KEY, JSON.stringify(completed));
            
            // Add XP
            moduleXP += XP_PER_LESSON;
            localStorage.setItem(XP_KEY, moduleXP.toString());
            
            // Add to global XP
            let totalXP = parseInt(localStorage.getItem('totalXP') || '0');
            totalXP += XP_PER_LESSON;
            localStorage.setItem('totalXP', totalXP.toString());
            
            // Mark complete
            markLessonComplete(lessonNum);
            updateAllStats();
            
            showAchievement(`Lesson ${lessonNum} Complete!`, `Great work on mastering this concept`, `+${XP_PER_LESSON} XP`);
        }

        // Update all statistics
        function updateAllStats() {
            const completed = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
            const moduleXP = parseInt(localStorage.getItem(XP_KEY) || '0');
            
            // Update header stats
            document.getElementById('xpDisplay').textContent = moduleXP;
            document.getElementById('lessonsDisplay').textContent = `${completed.length}/${TOTAL_LESSONS}`;
            document.getElementById('badgesDisplay').textContent = '0/1';
            
            // Update progress bar
            const progress = (completed.length / TOTAL_LESSONS) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('progressText').textContent = 
                `${completed.length} of ${TOTAL_LESSONS} lessons completed (3 coming soon)`;
            
            // Update summary stats
            document.getElementById('summaryComplete').textContent = `${completed.length}/${TOTAL_LESSONS}`;
            document.getElementById('summaryXP').textContent = moduleXP;
            document.getElementById('summaryBadges').textContent = 'In Progress';
        }

        // Show achievement popup
        function showAchievement(title, desc, xp) {
            document.getElementById('achievementTitle').textContent = title;
            document.getElementById('achievementDesc').textContent = desc;
            document.getElementById('achievementXP').textContent = xp;
            document.getElementById('achievementPopup').classList.add('show');
            document.getElementById('overlay').classList.add('show');
        }

        // Close achievement popup
        function closeAchievement() {
            document.getElementById('achievementPopup').classList.remove('show');
            document.getElementById('overlay').classList.remove('show');
        }

        // Initialize on page load
        loadProgress();
    </script>
</body>
</html>
