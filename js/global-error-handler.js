const ErrorHandler={init(){window.addEventListener('error',(event)=>{this.handleError({message:event.message,filename:event.filename,lineno:event.lineno,colno:event.colno,error:event.error});});window.addEventListener('unhandledrejection',(event)=>{this.handleError({message:event.reason?.message||String(event.reason),type:'Promise Rejection',error:event.reason});});console.log('âœ… Global Error Handler initialized');},handleError(errorInfo){console.error('ðŸš¨ Error caught:',errorInfo);try{const errors=JSON.parse(localStorage.getItem('tapin_errors')||'[]');errors.push({...errorInfo,timestamp:Date.now(),url:window.location.href,userAgent:navigator.userAgent});if(errors.length>50){errors.shift();}localStorage.setItem('tapin_errors',JSON.stringify(errors));}catch(e){console.error('Failed to save error:',e);}if(errorInfo.message&&!errorInfo.message.includes('Service Worker')){if(typeof TapInUtils!=='undefined'&&TapInUtils.showToast){TapInUtils.showToast('Something went wrong. Please refresh the page.','error');}}},getErrorLog(){try{return JSON.parse(localStorage.getItem('tapin_errors')||'[]');}catch(e){return[];}},clearErrorLog(){localStorage.removeItem('tapin_errors');}};if(typeof document!=='undefined'){document.addEventListener('DOMContentLoaded',()=>{ErrorHandler.init();});}window.ErrorHandler=ErrorHandler;