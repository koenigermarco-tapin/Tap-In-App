const ProgressSyncInit={async init(){ this.checkStorageHealth();await this.initializeSystems();this.syncAllProgress(); },checkStorageHealth(){const required=['totalXP','currentBelt','currentStripe'];const missing=required.filter(key=>!localStorage.getItem(key));if(missing.length>0){ this.initializeStorage();}},initializeStorage(){const defaults={totalXP:'0',currentBelt:'white',currentStripe:'1',completedLessons:'[]',userName:'Warrior_'+Math.floor(Math.random()*9999),beltLevel:'white',assessmentTotal:'0',currentStreak:'0',longestStreak:'0',lastActiveDate:new Date().toISOString().split('T')[0]};Object.entries(defaults).forEach(([key,value])=>{if(!localStorage.getItem(key)){localStorage.setItem(key,value);}});},async initializeSystems(){if(typeof BeltProgression!=='undefined'){BeltProgression.init();}if(typeof updateXPDisplay==='function'){updateXPDisplay();}if(typeof WisdomTracker!=='undefined'){WisdomTracker.init();}if(typeof HubUnlockSystem!=='undefined'){HubUnlockSystem.init();}},syncAllProgress(){if(typeof StorageManager!=='undefined'&&StorageManager.cloudSyncEnabled){StorageManager.syncToCloud().catch(console.error);}}};document.addEventListener('DOMContentLoaded',()=>{ProgressSyncInit.init();});window.ProgressSyncInit=ProgressSyncInit;