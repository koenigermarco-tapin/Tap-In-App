const DAILY_STREAK={checkStreak:function(){const today=new Date().toDateString();const lastVisit=localStorage.getItem('lastVisitDate');const currentStreak=parseInt(localStorage.getItem('dailyStreak'))||0;if(lastVisit===today){return currentStreak;}const yesterday=new Date(Date.now()-86400000).toDateString();if(lastVisit===yesterday){const newStreak=currentStreak+1;localStorage.setItem('dailyStreak',newStreak.toString());localStorage.setItem('lastVisitDate',today);if(newStreak%7===0){this.awardStreakBonus(newStreak);}return newStreak;}else if(lastVisit&&lastVisit!==yesterday){localStorage.setItem('dailyStreak','1');localStorage.setItem('lastVisitDate',today);return 1;}else{localStorage.setItem('dailyStreak','1');localStorage.setItem('lastVisitDate',today);return 1;}},getCurrentStreak:function(){return parseInt(localStorage.getItem('dailyStreak'))||0;},awardStreakBonus:function(streakDays){const bonusXP=streakDays*5;if(typeof window.TapInGamification!=='undefined'&&window.TapInGamification.awardXP){window.TapInGamification.awardXP(bonusXP,`${streakDays}-day streak milestone`);}else if(typeof addXP==='function'){addXP(bonusXP);}else{const totalXP=parseInt(localStorage.getItem('totalXP'))||0;localStorage.setItem('totalXP',(totalXP+bonusXP).toString());}this.showStreakMilestonePopup(streakDays,bonusXP);},showStreakMilestonePopup:function(days,bonusXP){const popup=document.createElement('div');popup.className='streak-milestone-popup';popup.innerHTML=`<div class="streak-content"><div class="fire-icon">ðŸ”¥</div><h3>${days}Day Streak!</h3><p>Your consistency is paying off!</p><div class="streak-bonus">+${bonusXP}Bonus XP</div></div>`;document.body.appendChild(popup);if(typeof confetti==='function'){confetti({particleCount:100,spread:70,origin:{y:0.6},colors:['#f6ad55','#ed8936','#dd6b20']});}setTimeout(()=>{popup.style.opacity='0';setTimeout(()=>popup.remove(),500);},4000);},displayStreak:function(){const streak=this.checkStreak();document.querySelectorAll('[data-streak-display]').forEach(el=>{el.innerHTML=`<span class="streak-fire">ðŸ”¥</span><span class="streak-number">${streak}</span><span class="streak-label">day${streak!==1 ? 's':''}</span>`;});document.querySelectorAll('[data-streak-count]').forEach(el=>{el.textContent=streak;});}};document.addEventListener('DOMContentLoaded',function(){DAILY_STREAK.displayStreak();});window.DAILY_STREAK=DAILY_STREAK;