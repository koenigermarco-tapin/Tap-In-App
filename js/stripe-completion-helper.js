function markStripeComplete(beltColor,stripeNumber){const key=`${beltColor}BeltStripe${stripeNumber}Complete`;const xpKey=`${key}_XP_Awarded`;localStorage.setItem(key,'true');if(!localStorage.getItem(xpKey)){const xpSystem=new window.TapInGamification.XPSystem();const achievementSystem=new window.TapInGamification.AchievementSystem();xpSystem.awardXP(window.TapInGamification.XP_REWARDS.completeStripe,`Completed ${beltColor}belt stripe ${stripeNumber}`,'training');localStorage.setItem(xpKey,'true');const totalStripes=countTotalStripes();if(totalStripes===1){achievementSystem.unlockAchievement('first-stripe');}checkBeltCompletion(beltColor);}}function countTotalStripes(){const belts=['white','blue','purple','brown','black'];let count=0;belts.forEach(belt=>{for(let i=1;i<=4;i++){const key=`${belt}BeltStripe${i}Complete`;if(localStorage.getItem(key)==='true'){count++;}}});return count;}function checkBeltCompletion(beltColor){const allStripesComplete=[1,2,3,4].every(i=>{return localStorage.getItem(`${beltColor}BeltStripe${i}Complete`)==='true';});if(allStripesComplete){const beltXpKey=`${beltColor}Belt_Complete_XP_Awarded`;if(!localStorage.getItem(beltXpKey)){const xpSystem=new window.TapInGamification.XPSystem();const achievementSystem=new window.TapInGamification.AchievementSystem();xpSystem.awardXP(window.TapInGamification.XP_REWARDS.completeBelt,`ðŸ¥‹ Completed ${beltColor}belt!`,'training');localStorage.setItem(beltXpKey,'true');const totalBelts=countCompletedBelts();if(totalBelts===1){achievementSystem.unlockAchievement('first-belt-complete');}if(beltColor==='white'){achievementSystem.unlockAchievement('vulnerability-first');}if(totalBelts===5){achievementSystem.unlockAchievement('all-belts');}}}}function countCompletedBelts(){const belts=['white','blue','purple','brown','black'];let count=0;belts.forEach(belt=>{const allComplete=[1,2,3,4].every(i=>{return localStorage.getItem(`${belt}BeltStripe${i}Complete`)==='true';});if(allComplete)count++;});return count;}window.tapinStripeHelper={markStripeComplete,countTotalStripes,checkBeltCompletion,countCompletedBelts};document.addEventListener('DOMContentLoaded',function(){const path=window.location.pathname;const match=path.match(/(white|blue|purple|brown|black)-belt-stripe(\d+)/);if(match){const[_,beltColor,stripeNum]=match;const key=`${beltColor}BeltStripe${stripeNum}Complete`;if(localStorage.getItem(key)==='true'){markStripeComplete(beltColor,parseInt(stripeNum));}}});