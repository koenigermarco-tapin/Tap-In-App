(function(){'use strict';window.TapInGamification=window.TapInGamification||{};window.TapInGamification.awardXP=function(amount,reason){if(typeof TapInXP!=='undefined'&&TapInXP.awardXP){return TapInXP.awardXP(amount,reason||'Completed task');}if(typeof window.TapInGamification!=='undefined'&&window.TapInGamification.XPSystem){try{const xpSystem=new window.TapInGamification.XPSystem();return xpSystem.awardXP(amount,reason||'Completed task','open-mat-tools');}catch(e){console.warn('Gamification system error:',e);}}const currentXP=parseInt(localStorage.getItem('totalXP')||'0');const newXP=currentXP+amount;localStorage.setItem('totalXP',newXP.toString());console.log(`+${amount}XP:${reason||'Completed task'}`);return newXP;};if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',initEnhancedSystem);}else{initEnhancedSystem();}function initEnhancedSystem(){setTimeout(function(){if(typeof TapInXP!=='undefined'&&TapInXP.awardXP){const originalAwardXP=window.TapInGamification.awardXP;window.TapInGamification.awardXP=function(amount,reason){return TapInXP.awardXP(amount,reason||'Completed task');};}},100);}window.TapInGamification.getTotalXP=function(){if(typeof TapInXP!=='undefined'&&TapInXP.getTotalXP){return TapInXP.getTotalXP();}return parseInt(localStorage.getItem('totalXP')||'0');};window.TapInGamification.getLevel=function(){if(typeof TapInXP!=='undefined'&&TapInXP.calculateLevel){const xp=window.TapInGamification.getTotalXP();return TapInXP.calculateLevel(xp);}const xp=parseInt(localStorage.getItem('totalXP')||'0');return Math.floor(xp/500)+1;};})();