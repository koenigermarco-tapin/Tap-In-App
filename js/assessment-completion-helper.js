function recordAssessmentCompletion(assessmentName,score){const xpSystem=new window.TapInGamification.XPSystem();const achievementSystem=new window.TapInGamification.AchievementSystem();const completionKey=`assessment_${assessmentName}_completed`;const xpKey=`assessment_${assessmentName}_XP_awarded`;const scoreKey=`assessment_${assessmentName}_score`;const previousScoreKey=`assessment_${assessmentName}_previous_score`;const previousScore=localStorage.getItem(scoreKey);if(previousScore){localStorage.setItem(previousScoreKey,previousScore);}localStorage.setItem(scoreKey,score.toString());const isFirstTime=!localStorage.getItem(completionKey);if(isFirstTime){localStorage.setItem(completionKey,'true');xpSystem.awardXP(window.TapInGamification.XP_REWARDS.completeAssessment,`Completed ${formatAssessmentName(assessmentName)}assessment`,'assessment');const totalAssessments=countCompletedAssessments();if(totalAssessments===1){achievementSystem.unlockAchievement('first-look');}if(score<50){achievementSystem.unlockAchievement('honest-look');}if(score===100){xpSystem.awardXP(window.TapInGamification.XP_REWARDS.perfectAssessment,`Perfect score on ${formatAssessmentName(assessmentName)}!`,'assessment');}}else{xpSystem.awardXP(window.TapInGamification.XP_REWARDS.retakeAssessment,`Retook ${formatAssessmentName(assessmentName)}assessment`,'assessment');if(previousScore&&score>parseInt(previousScore)){achievementSystem.unlockAchievement('growth-mindset');}}}function formatAssessmentName(name){return name .split('-').map(word=>word.charAt(0).toUpperCase()+word.slice(1)).join(' ');}function countCompletedAssessments(){const assessments=['work-life-balance','mental-health','worker-type','leadership-profile','team-dynamics','belt-assessment','white-belt-assessment','blue-belt-assessment','purple-belt-assessment','brown-belt-assessment','black-belt-assessment'];let count=0;assessments.forEach(assessment=>{const key=`assessment_${assessment}_completed`;if(localStorage.getItem(key)==='true'){count++;}});return count;}function checkSelfDiscoveryComplete(){const selfDiscovery=['work-life-balance','mental-health','worker-type'];const allComplete=selfDiscovery.every(assessment=>{const key=`assessment_${assessment}_completed`;return localStorage.getItem(key)==='true';});if(allComplete){const achievementSystem=new window.TapInGamification.AchievementSystem();achievementSystem.unlockAchievement('know-thyself');}}function recordBeltAssessment(beltColor){const xpSystem=new window.TapInGamification.XPSystem();const achievementSystem=new window.TapInGamification.AchievementSystem();const key=`${beltColor}BeltAssessmentComplete`;const xpKey=`${key}_XP_awarded`;localStorage.setItem(key,'true');if(!localStorage.getItem(xpKey)){xpSystem.awardXP(window.TapInGamification.XP_REWARDS.completeAssessment,`Completed ${beltColor}belt assessment`,'assessment');localStorage.setItem(xpKey,'true');if(beltColor==='white'){achievementSystem.unlockAchievement('belt-earned');}}}window.tapinAssessmentHelper={recordAssessmentCompletion,recordBeltAssessment,countCompletedAssessments,checkSelfDiscoveryComplete};document.addEventListener('DOMContentLoaded',function(){checkSelfDiscoveryComplete();});