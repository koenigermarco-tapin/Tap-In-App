<meta name="description" content="TAP-IN Leadership Academy: Leadership-Entwicklung, die wirklich wirkt.">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
<!-- Focus Management for Accessibility -->
<script src="js/focus-management.js" defer>
function completeAssessment(assessmentType) {
  if (!assessmentType) {
    const filename = window.location.pathname.split('/').pop();
    if (filename.includes('belt')) assessmentType = 'belt';
    else if (filename.includes('deep-dive')) assessmentType = 'deepdive';
    else if (filename.includes('mental-health')) assessmentType = 'mentalhealth';
    else if (filename.includes('worker-type')) assessmentType = 'workertype';
    else if (filename.includes('team')) assessmentType = 'team';
    else if (filename.includes('leadership')) assessmentType = 'leadership';
    else assessmentType = 'general';
  }
  
  const key = `assessment_${assessmentType}_completed`;
  const completedAssessments = JSON.parse(localStorage.getItem('completedAssessments') || '{}');
  
  if (completedAssessments[key]) {
    console.log('Assessment bereits abgeschlossen');
    redirectAfterCompletion();
    return;
  }
  
  completedAssessments[key] = {
    completedAt: new Date().toISOString(),
    xpEarned: 100
  };
  localStorage.setItem('completedAssessments', JSON.stringify(completedAssessments));
  
  if (typeof TapInGamification !== 'undefined') {
    TapInGamification.addXP(100, `${assessmentType} assessment abgeschlossen`);
  }
  
  showAchievement('Assessment abgeschlossen! +100 XP');
  setTimeout(redirectAfterCompletion, 2000);
}

function redirectAfterCompletion() {
  const filename = window.location.pathname.split('/').pop();
  if (filename.includes('belt')) {
    window.location.href = '../../gym/gym-dashboard-de.html';
  } else if (filename.includes('deep-dive')) {
    window.location.href = '../../hub/learning-hub-de.html';
  } else if (filename.includes('mental-health')) {
    window.location.href = '../../gym/gym-dashboard-de.html';
  } else {
    window.location.href = '../../gym/gym-dashboard-de.html';
  }
}

function showAchievement(message) {
  const achievement = document.createElement('div');
  achievement.className = 'achievement-toast';
  achievement.innerHTML = `
    <svg class="achievement-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
    </svg>
    <span>${message}</span>
  `;
  document.body.appendChild(achievement);
  setTimeout(() => achievement.classList.add('show'), 100);
  setTimeout(() => {
    achievement.classList.remove('show');
    setTimeout(() => achievement.remove(), 300);
  }, 3000);
}

</script>
<!-- Screen Reader Enhancements for Accessibility -->
<script src="js/screen-reader-enhancements.js" defer></script>